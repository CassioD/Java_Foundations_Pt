<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.chart.PieChart?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Menu?>
<?import javafx.scene.control.MenuBar?>
<?import javafx.scene.control.MenuItem?>
<?import javafx.scene.control.SeparatorMenuItem?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane prefHeight="800.0" prefWidth="1200.0" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.ui.MainDashboardController">
   <top>
      <VBox>
         <children>
            <!-- HBox para a barra superior contendo o menu e a logo -->
            <HBox alignment="CENTER_LEFT" spacing="10.0" style="-fx-background-color: #f4f4f4; -fx-border-color: #c0c0c0; -fx-border-width: 0 0 1 0;">
               <children>
                  <!-- Menu Bar -->
                  <MenuBar HBox.hgrow="NEVER">
                     <menus>
                        <Menu mnemonicParsing="false" text="Gerenciar">
                           <items>
                              <MenuItem mnemonicParsing="false" onAction="#handleUserManagementAction" text="Usuários" />
                              <MenuItem mnemonicParsing="false" onAction="#handleProjectManagementAction" text="Projetos" />
                              <MenuItem mnemonicParsing="false" onAction="#handleTeamManagementAction" text="Equipes" />
                              <MenuItem mnemonicParsing="false" onAction="#handleTaskManagementAction" text="Tarefas" />
                              <SeparatorMenuItem mnemonicParsing="false" />
                              <MenuItem mnemonicParsing="false" onAction="#handleProjectTeamAllocationAction" text="Alocar Equipe a Projeto" />
                           </items>
                        </Menu>
                        <Menu mnemonicParsing="false" text="Ajuda">
                           <items>
                              <MenuItem mnemonicParsing="false" text="Sobre" />
                           </items>
                        </Menu>
                     </menus>
                  </MenuBar>
                  <!-- Este Pane funciona como um espaçador flexível que empurra a logo para a direita -->
                  <Pane HBox.hgrow="ALWAYS" />
                  <!-- ImageView para exibir a logo -->
                  <ImageView fitHeight="40.0" pickOnBounds="true" preserveRatio="true">
                     <image>
                        <!-- O / no início do caminho indica que ele é relativo à raiz do classpath (pasta resources) -->
                        <Image url="/images/ccks.png" />
                     </image>
                     <HBox.margin>
                        <Insets right="10.0" />
                     </HBox.margin>
                  </ImageView>
               </children>
               <padding>
                  <Insets left="5.0" />
               </padding>
            </HBox>
         </children>
      </VBox>
   </top>
   <center>
      <VBox alignment="TOP_CENTER" spacing="20.0" BorderPane.alignment="CENTER">
         <padding>
            <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
         </padding>
         <children>
            <!-- "Cards" de Resumo -->
            <GridPane hgap="20.0" vgap="10.0">
              <columnConstraints>
                <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0" />
                <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0" />
                  <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0" />
                  <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0" />
              </columnConstraints>
              <rowConstraints>
                <RowConstraints minHeight="10.0" prefHeight="30.0" vgrow="SOMETIMES" />
              </rowConstraints>
               <children>
                  <VBox alignment="CENTER" style="-fx-background-color: #ffffff; -fx-border-color: #d0d0d0; -fx-border-radius: 5; -fx-background-radius: 5; -fx-padding: 15;">
                     <children>
                        <Label text="Projetos em Andamento"><font><Font name="System Bold" size="14.0" /></font></Label>
                        <Label fx:id="inProgressProjectsLabel" style="-fx-font-size: 28px; -fx-text-fill: #3498db;" text="0" />
                     </children>
                  </VBox>
                  <VBox alignment="CENTER" style="-fx-background-color: #ffffff; -fx-border-color: #d0d0d0; -fx-border-radius: 5; -fx-background-radius: 5; -fx-padding: 15;" GridPane.columnIndex="1">
                     <children>
                        <Label text="Tarefas Pendentes"><font><Font name="System Bold" size="14.0" /></font></Label>
                        <Label fx:id="pendingTasksLabel" style="-fx-font-size: 28px; -fx-text-fill: #f39c12;" text="0" />
                     </children>
                  </VBox>
                  <VBox alignment="CENTER" style="-fx-background-color: #ffffff; -fx-border-color: #d0d0d0; -fx-border-radius: 5; -fx-background-radius: 5; -fx-padding: 15;" GridPane.columnIndex="2">
                     <children>
                        <Label text="Tarefas Atrasadas"><font><Font name="System Bold" size="14.0" /></font></Label>
                        <Label fx:id="overdueTasksLabel" style="-fx-font-size: 28px; -fx-text-fill: #e74c3c;" text="0" />
                     </children>
                  </VBox>
                         <VBox alignment="CENTER" style="-fx-background-color: #ffffff; -fx-border-color: #d0d0d0; -fx-border-radius: 5; -fx-background-radius: 5; -fx-padding: 15;" GridPane.columnIndex="3">
                     <children>
                                <Label text="Tarefas Concluídas"><font><Font name="System Bold" size="14.0" /></font></Label>
                                <Label fx:id="totalTeamsLabel" style="-fx-font-size: 28px; -fx-text-fill: #27ae60;" text="0" />
                     </children>
                  </VBox>
               </children>
            </GridPane>
            <!-- Gráficos -->
            <GridPane hgap="20.0">
              <columnConstraints>
                <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0" />
                <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0" />
              </columnConstraints>
              <rowConstraints>
                <RowConstraints minHeight="10.0" prefHeight="300.0" vgrow="SOMETIMES" />
              </rowConstraints>
               <children>
                  <BarChart fx:id="tasksByProjectChart" title="Tarefas por Projeto">
                    <xAxis>
                      <CategoryAxis fx:id="projectAxis" side="BOTTOM" />
                    </xAxis>
                    <yAxis>
                      <NumberAxis fx:id="taskCountAxis" side="LEFT" />
                    </yAxis>
                  </BarChart>
                  <PieChart fx:id="teamsPieChart" title="Membros por Equipe" GridPane.columnIndex="1" />
               </children>
            </GridPane>
            <!-- Tabela de Tarefas -->
            <VBox VBox.vgrow="ALWAYS">
               <children>
                  <Label text="Tarefas Próximas ou Atrasadas"><font><Font name="System Bold" size="16.0" /></font><VBox.margin>
                        <Insets bottom="5.0" />
                     </VBox.margin></Label>
                  <TableView fx:id="tasksTableView" VBox.vgrow="ALWAYS">
                     <columns>
                        <TableColumn fx:id="taskTitleColumn" prefWidth="250.0" text="Título" />
                        <TableColumn fx:id="taskProjectColumn" prefWidth="200.0" text="Projeto" />
                        <TableColumn fx:id="taskResponsibleColumn" prefWidth="200.0" text="Responsável" />
                        <TableColumn fx:id="taskDueDateColumn" prefWidth="120.0" text="Prazo" />
                        <TableColumn fx:id="taskStatusColumn" prefWidth="120.0" text="Status" />
                        <TableColumn fx:id="taskProgressColumn" prefWidth="150.0" text="Progresso" />
                     </columns>
                     <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /></columnResizePolicy>
                  </TableView>
               </children>
            </VBox>
         </children>
      </VBox>
   </center>

</BorderPane>
